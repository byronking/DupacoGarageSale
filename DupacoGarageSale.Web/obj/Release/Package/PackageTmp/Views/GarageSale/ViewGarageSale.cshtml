@model DupacoGarageSale.Web.Models.GarageSaleViewModel

@{
    ViewBag.Title = "View garage sales";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="page-wrap" class="jumbotron" style="min-height:500px;">
    <div class="container">
        <div class="row">
            <div class="col-md-10">
                <input type="hidden" id="hdnGarageSaleId" value="@Model.Sale.GarageSaleId" />
                <h2><a href="~/Home" style="text-decoration:none;">Home / </a>@Model.Sale.GarageSaleName</h2>
                @Model.Sale.SaleDescription<br /><br />
            </div>
            <div class="col-md-2">
                @if (Model.User != null)
                {
                    <input type="hidden" id="hdnUserId" value="@Model.User.UserId" />
                    <a href="#" id="linkAddToItinerary" style="margin-top:5px">Add sale to itinerary</a><br /><br /> <!-- data-toggle="modal" data-target=".add-to-itinerary" -->
                }
            </div>
            <div class="col-md-5">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title"><strong>Sale address</strong></h3>
                    </div>
                    <div class="panel-body">
                        <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> @Model.Sale.SaleAddress1<br />

                        @if (Model.Sale.SaleAddress2 != string.Empty)
                        {
                            @Model.Sale.SaleAddress2;
                            Response.Write("<br/>");
                        }

                        @Model.Sale.SaleCity, @Model.Sale.SaleState @Model.Sale.SaleZip <br /> 
                    </div>
                </div>
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title"><strong>Items for sale</strong></h3>
                    </div>
                    <div class="panel-body">
                        <ul>
                            @foreach (var item in Model.Sale.GarageSaleItems)
                            {
                                <li>@item.ItemSubcategoryName</li>
                            }
                        </ul>                        
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title"><strong>Sale dates/times</strong></h3>
                    </div>
                    <div class="panel-body">
                        <table class="table table-bordered">                            
                            <tr>
                                <td class="text-center">@Model.Sale.DatesTimes.SaleDateOne.ToLongDateString()</td>
                                <td class="text-center">@Model.Sale.DatesTimes.SaleDateTwo.ToLongDateString()</td>
                                <td class="text-center">@Model.Sale.DatesTimes.SaleDateThree.ToLongDateString()</td>
                                <td class="text-center">@Model.Sale.DatesTimes.SaleDateFour.ToLongDateString()</td>
                            </tr>
                            <tr>
                                <td>Start:<br />@Model.Sale.DatesTimes.DayOneStart</td>
                                <td>Start:<br />@Model.Sale.DatesTimes.DayTwoStart</td>
                                <td>Start:<br />@Model.Sale.DatesTimes.DayThreeStart</td>
                                <td>Start:<br />@Model.Sale.DatesTimes.DayFourStart</td>
                            </tr>
                            <tr>
                                <td>End:<br />@Model.Sale.DatesTimes.DayOneEnd</td>
                                <td>End:<br />@Model.Sale.DatesTimes.DayTwoEnd</td>
                                <td>End:<br />@Model.Sale.DatesTimes.DayThreeEnd</td>
                                <td>End:<br />@Model.Sale.DatesTimes.DayFourEnd</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            @{ if (Model.GarageSaleSpecialItems.Count > 0)
               {
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title"><strong>Hot picks!</strong></h3>
                        </div>
                        <div class="panel-body">                   
                            @foreach (var item in Model.GarageSaleSpecialItems)
                            {
                                <div class="col-md-4">
                                    <div class="thumbnail" style="min-height:500px;">
                                        <img alt="100%x200" data-src="holder.js/100%x200" style="height: 200px; width: 100%; display: block;" src="~/Content/images/garage_sale_pictures/@item.PictureLink">
                                        <div class="caption">
                                            <h3>@item.Title</h3>
                                            @item.Description<br /><br />
                                            <p><span>$</span> @item.Price</p>                   
                                        </div>                    
                                    </div>
                                </div>
                            }                        
                        </div>
                    </div>
                }
            }
        </div>

        <div class="row">
            @{
                if (Model.BlogPosts != null && Model.BlogPosts.Count > 0)
                {
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title"><strong>What's going on at our sale!</strong></h3>
                        </div>
                        <div class="panel-body">                    
                            @foreach (var post in Model.BlogPosts)
                            {
                                <div>
                                    @Html.Hidden("hdnBlogPostId", post.BlogPostId)
                                    <h3>@post.BlogPostTitle</h3> 
                                    <small>Posted by @post.BlogPostUser @@ @post.PostDateTime</small><br /><br />
                                
                                    @if (@post.MediaTypeId == 1)
                                    {
                                        if (@post.ImageUri != string.Empty)
                                        {
                                            <div>                                            
                                                <img alt="@post.ImageUri" data-src="holder.js/200%x200" style="display: block;" 
                                                    class="img-thumbnail" src="~/Content/images/garage_sale_pictures/@post.ImageUri">
                                            </div>
                                        }
                                        
                                    }
                                    else if (@post.MediaTypeId == 2)
                                    {
                                        if (@post.YouTubeUri != string.Empty)
                                        {
                                            <div class="embed-responsive embed-responsive-4by3">
                                                <iframe class="embed-responsive-item" allowfullscreen="" src="@post.YouTubeUri"></iframe>
                                            </div>
                                        }
                                    }
                                    else if (@post.MediaTypeId == 3)
                                    {
                                        if (@post.VineUri != string.Empty)
                                        {
                                            <div>
                                                <iframe class="vine-embed" src="@post.VineUri" width="600" height="600" frameborder="0"></iframe>
                                                <script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>
                                            </div>
                                        }
                                    }
                                    <div style="margin-top:15px;">
                                        @post.PostMessage
                                    </div>
                                </div>
                            <hr />
                            }
                        </div>
                    </div>
                }
            }
                
        </div>
    </div>
</div>

<!-- Add to itinerary modal -->
<div class="modal fade add-to-itinerary" id="addToItineraryModal" tabindex="-1" role="dialog" aria-labelledby="addToItineraryModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">Garage sale added to your itinerary. Click <a href="/GarageSale/ViewItinerary/@ViewBag.ItineraryId" id="linkViewItinerary">here</a> to view your itinerary.</div>
        </div>
    </div>
</div>